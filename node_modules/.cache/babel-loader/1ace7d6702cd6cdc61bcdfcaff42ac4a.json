{"ast":null,"code":"var HANDJS = HANDJS || {};\n\n(function () {\n  // If the user agent already supports Pointer Events, do nothing\n  if (window.PointerEvent) return; // Polyfilling indexOf for old browsers\n\n  if (!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function (searchElement) {\n      var t = Object(this);\n      var len = t.length >>> 0;\n\n      if (len === 0) {\n        return -1;\n      }\n\n      var n = 0;\n\n      if (arguments.length > 0) {\n        n = Number(arguments[1]);\n\n        if (n !== n) {\n          // shortcut for verifying if it's NaN\n          n = 0;\n        } else if (n !== 0 && n !== Infinity && n !== -Infinity) {\n          n = (n > 0 || -1) * Math.floor(Math.abs(n));\n        }\n      }\n\n      if (n >= len) {\n        return -1;\n      }\n\n      var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n\n      for (; k < len; k++) {\n        if (k in t && t[k] === searchElement) {\n          return k;\n        }\n      }\n\n      return -1;\n    };\n  } //Polyfilling forEach for old browsers\n\n\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function (method, thisArg) {\n      if (!this || !(method instanceof Function)) throw new TypeError();\n\n      for (var i = 0; i < this.length; i++) method.call(thisArg, this[i], i, this);\n    };\n  } // Polyfilling trim for old browsers\n\n\n  if (!String.prototype.trim) {\n    String.prototype.trim = function () {\n      return this.replace(/^\\s+|\\s+$/, '');\n    };\n  } // Installing Hand.js\n\n\n  var supportedEventsNames = [\"pointerdown\", \"pointerup\", \"pointermove\", \"pointerover\", \"pointerout\", \"pointercancel\", \"pointerenter\", \"pointerleave\"];\n  var upperCaseEventsNames = [\"PointerDown\", \"PointerUp\", \"PointerMove\", \"PointerOver\", \"PointerOut\", \"PointerCancel\", \"PointerEnter\", \"PointerLeave\"];\n  var POINTER_TYPE_TOUCH = \"touch\";\n  var POINTER_TYPE_PEN = \"pen\";\n  var POINTER_TYPE_MOUSE = \"mouse\";\n  var previousTargets = {};\n\n  var checkPreventDefault = function (node) {\n    while (node && !node.handjs_forcePreventDefault) {\n      node = node.parentNode;\n    }\n\n    return !!node || window.handjs_forcePreventDefault;\n  }; // Touch events\n\n\n  var generateTouchClonedEvent = function (sourceEvent, newName, canBubble, target, relatedTarget) {\n    // Considering touch events are almost like super mouse events\n    var evObj;\n\n    if (document.createEvent) {\n      evObj = document.createEvent('MouseEvents');\n      evObj.initMouseEvent(newName, canBubble, true, window, 1, sourceEvent.screenX, sourceEvent.screenY, sourceEvent.clientX, sourceEvent.clientY, sourceEvent.ctrlKey, sourceEvent.altKey, sourceEvent.shiftKey, sourceEvent.metaKey, sourceEvent.button, relatedTarget || sourceEvent.relatedTarget);\n    } else {\n      evObj = document.createEventObject();\n      evObj.screenX = sourceEvent.screenX;\n      evObj.screenY = sourceEvent.screenY;\n      evObj.clientX = sourceEvent.clientX;\n      evObj.clientY = sourceEvent.clientY;\n      evObj.ctrlKey = sourceEvent.ctrlKey;\n      evObj.altKey = sourceEvent.altKey;\n      evObj.shiftKey = sourceEvent.shiftKey;\n      evObj.metaKey = sourceEvent.metaKey;\n      evObj.button = sourceEvent.button;\n      evObj.relatedTarget = relatedTarget || sourceEvent.relatedTarget;\n    } // offsets\n\n\n    if (evObj.offsetX === undefined) {\n      if (sourceEvent.offsetX !== undefined) {\n        // For Opera which creates readonly properties\n        if (Object && Object.defineProperty !== undefined) {\n          Object.defineProperty(evObj, \"offsetX\", {\n            writable: true\n          });\n          Object.defineProperty(evObj, \"offsetY\", {\n            writable: true\n          });\n        }\n\n        evObj.offsetX = sourceEvent.offsetX;\n        evObj.offsetY = sourceEvent.offsetY;\n      } else if (Object && Object.defineProperty !== undefined) {\n        Object.defineProperty(evObj, \"offsetX\", {\n          get: function () {\n            if (this.currentTarget && this.currentTarget.offsetLeft) {\n              return sourceEvent.clientX - this.currentTarget.offsetLeft;\n            }\n\n            return sourceEvent.clientX;\n          }\n        });\n        Object.defineProperty(evObj, \"offsetY\", {\n          get: function () {\n            if (this.currentTarget && this.currentTarget.offsetTop) {\n              return sourceEvent.clientY - this.currentTarget.offsetTop;\n            }\n\n            return sourceEvent.clientY;\n          }\n        });\n      } else if (sourceEvent.layerX !== undefined) {\n        evObj.offsetX = sourceEvent.layerX - sourceEvent.currentTarget.offsetLeft;\n        evObj.offsetY = sourceEvent.layerY - sourceEvent.currentTarget.offsetTop;\n      }\n    } // adding missing properties\n\n\n    if (sourceEvent.isPrimary !== undefined) evObj.isPrimary = sourceEvent.isPrimary;else evObj.isPrimary = true;\n    if (sourceEvent.pressure) evObj.pressure = sourceEvent.pressure;else {\n      var button = 0;\n      if (sourceEvent.which !== undefined) button = sourceEvent.which;else if (sourceEvent.button !== undefined) {\n        button = sourceEvent.button;\n      }\n      evObj.pressure = button === 0 ? 0 : 0.5;\n    }\n    if (sourceEvent.rotation) evObj.rotation = sourceEvent.rotation;else evObj.rotation = 0; // Timestamp\n\n    if (sourceEvent.hwTimestamp) evObj.hwTimestamp = sourceEvent.hwTimestamp;else evObj.hwTimestamp = 0; // Tilts\n\n    if (sourceEvent.tiltX) evObj.tiltX = sourceEvent.tiltX;else evObj.tiltX = 0;\n    if (sourceEvent.tiltY) evObj.tiltY = sourceEvent.tiltY;else evObj.tiltY = 0; // Width and Height\n\n    if (sourceEvent.height) evObj.height = sourceEvent.height;else evObj.height = 0;\n    if (sourceEvent.width) evObj.width = sourceEvent.width;else evObj.width = 0; // preventDefault\n\n    evObj.preventDefault = function () {\n      if (sourceEvent.preventDefault !== undefined) sourceEvent.preventDefault();\n    }; // stopPropagation\n\n\n    if (evObj.stopPropagation !== undefined) {\n      var current = evObj.stopPropagation;\n\n      evObj.stopPropagation = function () {\n        if (sourceEvent.stopPropagation !== undefined) sourceEvent.stopPropagation();\n        current.call(this);\n      };\n    } // Pointer values\n\n\n    evObj.pointerId = sourceEvent.pointerId;\n    evObj.pointerType = sourceEvent.pointerType;\n\n    switch (evObj.pointerType) {\n      // Old spec version check\n      case 2:\n        evObj.pointerType = POINTER_TYPE_TOUCH;\n        break;\n\n      case 3:\n        evObj.pointerType = POINTER_TYPE_PEN;\n        break;\n\n      case 4:\n        evObj.pointerType = POINTER_TYPE_MOUSE;\n        break;\n    } // Fire event\n\n\n    if (target) target.dispatchEvent(evObj);else if (sourceEvent.target) {\n      sourceEvent.target.dispatchEvent(evObj);\n    } else {\n      sourceEvent.srcElement.fireEvent(\"on\" + getMouseEquivalentEventName(newName), evObj); // We must fallback to mouse event for very old browsers\n    }\n  };\n\n  var generateMouseProxy = function (evt, eventName, canBubble, target, relatedTarget) {\n    evt.pointerId = 1;\n    evt.pointerType = POINTER_TYPE_MOUSE;\n    generateTouchClonedEvent(evt, eventName, canBubble, target, relatedTarget);\n  };\n\n  var generateTouchEventProxy = function (name, touchPoint, target, eventObject, canBubble, relatedTarget) {\n    var touchPointId = touchPoint.identifier + 2; // Just to not override mouse id\n\n    touchPoint.pointerId = touchPointId;\n    touchPoint.pointerType = POINTER_TYPE_TOUCH;\n    touchPoint.currentTarget = target;\n\n    if (eventObject.preventDefault !== undefined) {\n      touchPoint.preventDefault = function () {\n        eventObject.preventDefault();\n      };\n    }\n\n    generateTouchClonedEvent(touchPoint, name, canBubble, target, relatedTarget);\n  };\n\n  var checkEventRegistration = function (node, eventName) {\n    return node.__handjsGlobalRegisteredEvents && node.__handjsGlobalRegisteredEvents[eventName];\n  };\n\n  var findEventRegisteredNode = function (node, eventName) {\n    while (node && !checkEventRegistration(node, eventName)) node = node.parentNode;\n\n    if (node) return node;else if (checkEventRegistration(window, eventName)) return window;\n  };\n\n  var generateTouchEventProxyIfRegistered = function (eventName, touchPoint, target, eventObject, canBubble, relatedTarget) {\n    // Check if user registered this event\n    if (findEventRegisteredNode(target, eventName)) {\n      generateTouchEventProxy(eventName, touchPoint, target, eventObject, canBubble, relatedTarget);\n    }\n  }; //var handleOtherEvent = function (eventObject, name, useLocalTarget, checkRegistration) {\n  //    if (eventObject.preventManipulation)\n  //        eventObject.preventManipulation();\n  //    for (var i = 0; i < eventObject.changedTouches.length; ++i) {\n  //        var touchPoint = eventObject.changedTouches[i];\n  //        if (useLocalTarget) {\n  //            previousTargets[touchPoint.identifier] = touchPoint.target;\n  //        }\n  //        if (checkRegistration) {\n  //            generateTouchEventProxyIfRegistered(name, touchPoint, previousTargets[touchPoint.identifier], eventObject, true);\n  //        } else {\n  //            generateTouchEventProxy(name, touchPoint, previousTargets[touchPoint.identifier], eventObject, true);\n  //        }\n  //    }\n  //};\n\n\n  var getMouseEquivalentEventName = function (eventName) {\n    return eventName.toLowerCase().replace(\"pointer\", \"mouse\");\n  };\n\n  var getPrefixEventName = function (prefix, eventName) {\n    var upperCaseIndex = supportedEventsNames.indexOf(eventName);\n    var newEventName = prefix + upperCaseEventsNames[upperCaseIndex];\n    return newEventName;\n  };\n\n  var registerOrUnregisterEvent = function (item, name, func, enable) {\n    if (item.__handjsRegisteredEvents === undefined) {\n      item.__handjsRegisteredEvents = [];\n    }\n\n    if (enable) {\n      if (item.__handjsRegisteredEvents[name] !== undefined) {\n        item.__handjsRegisteredEvents[name]++;\n        return;\n      }\n\n      item.__handjsRegisteredEvents[name] = 1;\n      item.addEventListener(name, func, false);\n    } else {\n      if (item.__handjsRegisteredEvents.indexOf(name) !== -1) {\n        item.__handjsRegisteredEvents[name]--;\n\n        if (item.__handjsRegisteredEvents[name] !== 0) {\n          return;\n        }\n      }\n\n      item.removeEventListener(name, func);\n      item.__handjsRegisteredEvents[name] = 0;\n    }\n  };\n\n  var setTouchAware = function (item, eventName, enable) {\n    // Leaving tokens\n    if (!item.__handjsGlobalRegisteredEvents) {\n      item.__handjsGlobalRegisteredEvents = [];\n    }\n\n    if (enable) {\n      if (item.__handjsGlobalRegisteredEvents[eventName] !== undefined) {\n        item.__handjsGlobalRegisteredEvents[eventName]++;\n        return;\n      }\n\n      item.__handjsGlobalRegisteredEvents[eventName] = 1;\n    } else {\n      if (item.__handjsGlobalRegisteredEvents[eventName] !== undefined) {\n        item.__handjsGlobalRegisteredEvents[eventName]--;\n\n        if (item.__handjsGlobalRegisteredEvents[eventName] < 0) {\n          item.__handjsGlobalRegisteredEvents[eventName] = 0;\n        }\n      }\n    }\n\n    var nameGenerator;\n    var eventGenerator;\n\n    if (window.MSPointerEvent) {\n      nameGenerator = function (name) {\n        return getPrefixEventName(\"MS\", name);\n      };\n\n      eventGenerator = generateTouchClonedEvent;\n    } else {\n      nameGenerator = getMouseEquivalentEventName;\n      eventGenerator = generateMouseProxy;\n    }\n\n    switch (eventName) {\n      case \"pointerenter\":\n      case \"pointerleave\":\n        var targetEvent = nameGenerator(eventName);\n\n        if (item['on' + targetEvent.toLowerCase()] !== undefined) {\n          registerOrUnregisterEvent(item, targetEvent, function (evt) {\n            eventGenerator(evt, eventName);\n          }, enable);\n        }\n\n        break;\n    }\n  }; // Intercept addEventListener calls by changing the prototype\n\n\n  var interceptAddEventListener = function (root) {\n    var current = root.prototype ? root.prototype.addEventListener : root.addEventListener;\n\n    var customAddEventListener = function (name, func, capture) {\n      // Branch when a PointerXXX is used\n      if (supportedEventsNames.indexOf(name) !== -1) {\n        setTouchAware(this, name, true);\n      }\n\n      if (current === undefined) {\n        this.attachEvent(\"on\" + getMouseEquivalentEventName(name), func);\n      } else {\n        current.call(this, name, func, capture);\n      }\n    };\n\n    if (root.prototype) {\n      root.prototype.addEventListener = customAddEventListener;\n    } else {\n      root.addEventListener = customAddEventListener;\n    }\n  }; // Intercept removeEventListener calls by changing the prototype\n\n\n  var interceptRemoveEventListener = function (root) {\n    var current = root.prototype ? root.prototype.removeEventListener : root.removeEventListener;\n\n    var customRemoveEventListener = function (name, func, capture) {\n      // Release when a PointerXXX is used\n      if (supportedEventsNames.indexOf(name) !== -1) {\n        setTouchAware(this, name, false);\n      }\n\n      if (current === undefined) {\n        this.detachEvent(getMouseEquivalentEventName(name), func);\n      } else {\n        current.call(this, name, func, capture);\n      }\n    };\n\n    if (root.prototype) {\n      root.prototype.removeEventListener = customRemoveEventListener;\n    } else {\n      root.removeEventListener = customRemoveEventListener;\n    }\n  }; // Hooks\n\n\n  interceptAddEventListener(window);\n  interceptAddEventListener(window.HTMLElement || window.Element);\n  interceptAddEventListener(document);\n\n  if (!navigator.isCocoonJS) {\n    interceptAddEventListener(HTMLBodyElement);\n    interceptAddEventListener(HTMLDivElement);\n    interceptAddEventListener(HTMLImageElement);\n    interceptAddEventListener(HTMLUListElement);\n    interceptAddEventListener(HTMLAnchorElement);\n    interceptAddEventListener(HTMLLIElement);\n    interceptAddEventListener(HTMLTableElement);\n\n    if (window.HTMLSpanElement) {\n      interceptAddEventListener(HTMLSpanElement);\n    }\n  }\n\n  if (window.HTMLCanvasElement) {\n    interceptAddEventListener(HTMLCanvasElement);\n  }\n\n  if (!navigator.isCocoonJS && window.SVGElement) {\n    interceptAddEventListener(SVGElement);\n  }\n\n  interceptRemoveEventListener(window);\n  interceptRemoveEventListener(window.HTMLElement || window.Element);\n  interceptRemoveEventListener(document);\n\n  if (!navigator.isCocoonJS) {\n    interceptRemoveEventListener(HTMLBodyElement);\n    interceptRemoveEventListener(HTMLDivElement);\n    interceptRemoveEventListener(HTMLImageElement);\n    interceptRemoveEventListener(HTMLUListElement);\n    interceptRemoveEventListener(HTMLAnchorElement);\n    interceptRemoveEventListener(HTMLLIElement);\n    interceptRemoveEventListener(HTMLTableElement);\n\n    if (window.HTMLSpanElement) {\n      interceptRemoveEventListener(HTMLSpanElement);\n    }\n  }\n\n  if (window.HTMLCanvasElement) {\n    interceptRemoveEventListener(HTMLCanvasElement);\n  }\n\n  if (!navigator.isCocoonJS && window.SVGElement) {\n    interceptRemoveEventListener(SVGElement);\n  } // Prevent mouse event from being dispatched after Touch Events action\n\n\n  var touching = false;\n  var touchTimer = -1;\n\n  function setTouchTimer() {\n    touching = true;\n    clearTimeout(touchTimer);\n    touchTimer = setTimeout(function () {\n      touching = false;\n    }, 700); // 1. Mobile browsers dispatch mouse events 300ms after touchend\n    // 2. Chrome for Android dispatch mousedown for long-touch about 650ms\n    // Result: Blocking Mouse Events for 700ms.\n  }\n\n  function getFirstCommonNode(x, y) {\n    while (x) {\n      if (x.contains(y)) return x;\n      x = x.parentNode;\n    }\n\n    return null;\n  } //generateProxy receives a node to dispatch the event\n\n\n  function dispatchPointerEnter(currentTarget, relatedTarget, generateProxy) {\n    var commonParent = getFirstCommonNode(currentTarget, relatedTarget);\n    var node = currentTarget;\n    var nodelist = [];\n\n    while (node && node !== commonParent) {\n      //target range: this to the direct child of parent relatedTarget\n      if (checkEventRegistration(node, \"pointerenter\")) //check if any parent node has pointerenter\n        nodelist.push(node);\n      node = node.parentNode;\n    }\n\n    while (nodelist.length > 0) generateProxy(nodelist.pop());\n  } //generateProxy receives a node to dispatch the event\n\n\n  function dispatchPointerLeave(currentTarget, relatedTarget, generateProxy) {\n    var commonParent = getFirstCommonNode(currentTarget, relatedTarget);\n    var node = currentTarget;\n\n    while (node && node !== commonParent) {\n      //target range: this to the direct child of parent relatedTarget\n      if (checkEventRegistration(node, \"pointerleave\")) //check if any parent node has pointerleave\n        generateProxy(node);\n      node = node.parentNode;\n    }\n  } // Handling events on window to prevent unwanted super-bubbling\n  // All mouse events are affected by touch fallback\n\n\n  function applySimpleEventTunnels(nameGenerator, eventGenerator) {\n    [\"pointerdown\", \"pointermove\", \"pointerup\", \"pointerover\", \"pointerout\"].forEach(function (eventName) {\n      window.addEventListener(nameGenerator(eventName), function (evt) {\n        if (!touching && findEventRegisteredNode(evt.target, eventName)) eventGenerator(evt, eventName, true);\n      });\n    });\n    if (window['on' + nameGenerator(\"pointerenter\").toLowerCase()] === undefined) window.addEventListener(nameGenerator(\"pointerover\"), function (evt) {\n      if (touching) return;\n      var foundNode = findEventRegisteredNode(evt.target, \"pointerenter\");\n      if (!foundNode || foundNode === window) return;else if (!foundNode.contains(evt.relatedTarget)) {\n        dispatchPointerEnter(foundNode, evt.relatedTarget, function (targetNode) {\n          eventGenerator(evt, \"pointerenter\", false, targetNode, evt.relatedTarget);\n        });\n      }\n    });\n    if (window['on' + nameGenerator(\"pointerleave\").toLowerCase()] === undefined) window.addEventListener(nameGenerator(\"pointerout\"), function (evt) {\n      if (touching) return;\n      var foundNode = findEventRegisteredNode(evt.target, \"pointerleave\");\n      if (!foundNode || foundNode === window) return;else if (!foundNode.contains(evt.relatedTarget)) {\n        dispatchPointerLeave(foundNode, evt.relatedTarget, function (targetNode) {\n          eventGenerator(evt, \"pointerleave\", false, targetNode, evt.relatedTarget);\n        });\n      }\n    });\n  }\n\n  (function () {\n    if (window.MSPointerEvent) {\n      //IE 10\n      applySimpleEventTunnels(function (name) {\n        return getPrefixEventName(\"MS\", name);\n      }, generateTouchClonedEvent);\n    } else {\n      applySimpleEventTunnels(getMouseEquivalentEventName, generateMouseProxy); // Handling move on window to detect pointerleave/out/over\n\n      if (window.ontouchstart !== undefined) {\n        window.addEventListener('touchstart', function (eventObject) {\n          for (var i = 0; i < eventObject.changedTouches.length; ++i) {\n            var touchPoint = eventObject.changedTouches[i];\n            previousTargets[touchPoint.identifier] = touchPoint.target;\n            generateTouchEventProxyIfRegistered(\"pointerover\", touchPoint, touchPoint.target, eventObject, true); //pointerenter should not be bubbled\n\n            dispatchPointerEnter(touchPoint.target, null, function (targetNode) {\n              generateTouchEventProxy(\"pointerenter\", touchPoint, targetNode, eventObject, false);\n            });\n            generateTouchEventProxyIfRegistered(\"pointerdown\", touchPoint, touchPoint.target, eventObject, true);\n          }\n\n          setTouchTimer();\n        });\n        window.addEventListener('touchend', function (eventObject) {\n          for (var i = 0; i < eventObject.changedTouches.length; ++i) {\n            var touchPoint = eventObject.changedTouches[i];\n            var currentTarget = previousTargets[touchPoint.identifier];\n            generateTouchEventProxyIfRegistered(\"pointerup\", touchPoint, currentTarget, eventObject, true);\n            generateTouchEventProxyIfRegistered(\"pointerout\", touchPoint, currentTarget, eventObject, true); //pointerleave should not be bubbled\n\n            dispatchPointerLeave(currentTarget, null, function (targetNode) {\n              generateTouchEventProxy(\"pointerleave\", touchPoint, targetNode, eventObject, false);\n            });\n          }\n\n          setTouchTimer();\n        });\n        window.addEventListener('touchmove', function (eventObject) {\n          for (var i = 0; i < eventObject.changedTouches.length; ++i) {\n            var touchPoint = eventObject.changedTouches[i];\n            var newTarget = document.elementFromPoint(touchPoint.clientX, touchPoint.clientY);\n            var currentTarget = previousTargets[touchPoint.identifier]; // If force preventDefault\n\n            if (currentTarget && checkPreventDefault(currentTarget) === true) eventObject.preventDefault();\n            generateTouchEventProxyIfRegistered(\"pointermove\", touchPoint, currentTarget, eventObject, true);\n\n            if (!navigator.isCocoonJS) {\n              var newTarget = document.elementFromPoint(touchPoint.clientX, touchPoint.clientY);\n\n              if (currentTarget === newTarget) {\n                continue; // We can skip this as the pointer is effectively over the current target\n              }\n\n              if (currentTarget) {\n                // Raise out\n                generateTouchEventProxyIfRegistered(\"pointerout\", touchPoint, currentTarget, eventObject, true, newTarget); // Raise leave\n\n                if (!currentTarget.contains(newTarget)) {\n                  // Leave must be called if the new target is not a child of the current\n                  dispatchPointerLeave(currentTarget, newTarget, function (targetNode) {\n                    generateTouchEventProxy(\"pointerleave\", touchPoint, targetNode, eventObject, false, newTarget);\n                  });\n                }\n              }\n\n              if (newTarget) {\n                // Raise over\n                generateTouchEventProxyIfRegistered(\"pointerover\", touchPoint, newTarget, eventObject, true, currentTarget); // Raise enter\n\n                if (!newTarget.contains(currentTarget)) {\n                  // Leave must be called if the new target is not the parent of the current\n                  dispatchPointerEnter(newTarget, currentTarget, function (targetNode) {\n                    generateTouchEventProxy(\"pointerenter\", touchPoint, targetNode, eventObject, false, currentTarget);\n                  });\n                }\n              }\n\n              previousTargets[touchPoint.identifier] = newTarget;\n            }\n          }\n\n          setTouchTimer();\n        });\n        window.addEventListener('touchcancel', function (eventObject) {\n          for (var i = 0; i < eventObject.changedTouches.length; ++i) {\n            var touchPoint = eventObject.changedTouches[i];\n            generateTouchEventProxyIfRegistered(\"pointercancel\", touchPoint, previousTargets[touchPoint.identifier], eventObject, true);\n          }\n        });\n      }\n    }\n  })(); // Extension to navigator\n\n\n  if (navigator.pointerEnabled === undefined) {\n    // Indicates if the browser will fire pointer events for pointing input\n    navigator.pointerEnabled = true; // IE\n\n    if (navigator.msPointerEnabled) {\n      navigator.maxTouchPoints = navigator.msMaxTouchPoints;\n    }\n  }\n})();\n\n(function () {\n  if (window.PointerEvent) return; // Handling touch-action css rule\n\n  if (document.styleSheets && document.addEventListener) {\n    document.addEventListener(\"DOMContentLoaded\", function () {\n      if (document.body.style.touchAction !== undefined) return;\n      var globalRegex = new RegExp(\".+?{.*?}\", \"m\");\n      var selectorRegex = new RegExp(\".+?{\", \"m\");\n\n      var filterStylesheet = function (unfilteredSheet) {\n        var filter = globalRegex.exec(unfilteredSheet);\n\n        if (!filter) {\n          return;\n        }\n\n        var block = filter[0];\n        unfilteredSheet = unfilteredSheet.replace(block, \"\").trim();\n        var selectorText = selectorRegex.exec(block)[0].replace(\"{\", \"\").trim(); // Checking if the user wanted to deactivate the default behavior\n\n        if (block.replace(/\\s/g, \"\").indexOf(\"touch-action:none\") !== -1) {\n          var elements = document.querySelectorAll(selectorText);\n\n          for (var elementIndex = 0; elementIndex < elements.length; elementIndex++) {\n            var element = elements[elementIndex];\n\n            if (element.style.msTouchAction !== undefined) {\n              element.style.msTouchAction = \"none\";\n            } else {\n              element.handjs_forcePreventDefault = true;\n            }\n          }\n        }\n\n        return unfilteredSheet;\n      };\n\n      var processStylesheet = function (unfilteredSheet) {\n        if (window.setImmediate) {\n          //not blocking UI interaction for a long time\n          if (unfilteredSheet) setImmediate(processStylesheet, filterStylesheet(unfilteredSheet));\n        } else {\n          while (unfilteredSheet) {\n            unfilteredSheet = filterStylesheet(unfilteredSheet);\n          }\n        }\n      }; // Looking for touch-action in referenced stylesheets\n\n\n      try {\n        for (var index = 0; index < document.styleSheets.length; index++) {\n          var sheet = document.styleSheets[index];\n\n          if (sheet.href == null\n          /* undefined or null */\n          ) {\n              // it is an inline style\n              continue;\n            } // Loading the original stylesheet\n\n\n          var xhr = new XMLHttpRequest();\n          xhr.open(\"get\", sheet.href);\n          xhr.send();\n          var unfilteredSheet = xhr.responseText.replace(/(\\n|\\r)/g, \"\");\n          processStylesheet(unfilteredSheet);\n        }\n      } catch (e) {// Silently fail...\n      } // Looking for touch-action in inline styles\n\n\n      var styles = document.getElementsByTagName(\"style\");\n\n      for (var index = 0; index < styles.length; index++) {\n        var inlineSheet = styles[index];\n        var inlineUnfilteredSheet = inlineSheet.innerHTML.replace(/(\\n|\\r)/g, \"\").trim();\n        processStylesheet(inlineUnfilteredSheet);\n      }\n    }, false);\n  }\n})();","map":{"version":3,"sources":["/home/art/Desktop/VScripts/Projetos-3/node_modules/handjs/hand.js"],"names":["HANDJS","window","PointerEvent","Array","prototype","indexOf","searchElement","t","Object","len","length","n","arguments","Number","Infinity","Math","floor","abs","k","max","forEach","method","thisArg","Function","TypeError","i","call","String","trim","replace","supportedEventsNames","upperCaseEventsNames","POINTER_TYPE_TOUCH","POINTER_TYPE_PEN","POINTER_TYPE_MOUSE","previousTargets","checkPreventDefault","node","handjs_forcePreventDefault","parentNode","generateTouchClonedEvent","sourceEvent","newName","canBubble","target","relatedTarget","evObj","document","createEvent","initMouseEvent","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","createEventObject","offsetX","undefined","defineProperty","writable","offsetY","get","currentTarget","offsetLeft","offsetTop","layerX","layerY","isPrimary","pressure","which","rotation","hwTimestamp","tiltX","tiltY","height","width","preventDefault","stopPropagation","current","pointerId","pointerType","dispatchEvent","srcElement","fireEvent","getMouseEquivalentEventName","generateMouseProxy","evt","eventName","generateTouchEventProxy","name","touchPoint","eventObject","touchPointId","identifier","checkEventRegistration","__handjsGlobalRegisteredEvents","findEventRegisteredNode","generateTouchEventProxyIfRegistered","toLowerCase","getPrefixEventName","prefix","upperCaseIndex","newEventName","registerOrUnregisterEvent","item","func","enable","__handjsRegisteredEvents","addEventListener","removeEventListener","setTouchAware","nameGenerator","eventGenerator","MSPointerEvent","targetEvent","interceptAddEventListener","root","customAddEventListener","capture","attachEvent","interceptRemoveEventListener","customRemoveEventListener","detachEvent","HTMLElement","Element","navigator","isCocoonJS","HTMLBodyElement","HTMLDivElement","HTMLImageElement","HTMLUListElement","HTMLAnchorElement","HTMLLIElement","HTMLTableElement","HTMLSpanElement","HTMLCanvasElement","SVGElement","touching","touchTimer","setTouchTimer","clearTimeout","setTimeout","getFirstCommonNode","x","y","contains","dispatchPointerEnter","generateProxy","commonParent","nodelist","push","pop","dispatchPointerLeave","applySimpleEventTunnels","foundNode","targetNode","ontouchstart","changedTouches","newTarget","elementFromPoint","pointerEnabled","msPointerEnabled","maxTouchPoints","msMaxTouchPoints","styleSheets","body","style","touchAction","globalRegex","RegExp","selectorRegex","filterStylesheet","unfilteredSheet","filter","exec","block","selectorText","elements","querySelectorAll","elementIndex","element","msTouchAction","processStylesheet","setImmediate","index","sheet","href","xhr","XMLHttpRequest","open","send","responseText","e","styles","getElementsByTagName","inlineSheet","inlineUnfilteredSheet","innerHTML"],"mappings":"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","sourcesContent":["var HANDJS = HANDJS || {};\r\n\r\n(function () {\r\n    // If the user agent already supports Pointer Events, do nothing\r\n    if (window.PointerEvent)\r\n        return;\r\n\r\n    // Polyfilling indexOf for old browsers\r\n    if (!Array.prototype.indexOf) {\r\n        Array.prototype.indexOf = function (searchElement) {\r\n            var t = Object(this);\r\n            var len = t.length >>> 0;\r\n            if (len === 0) {\r\n                return -1;\r\n            }\r\n            var n = 0;\r\n            if (arguments.length > 0) {\r\n                n = Number(arguments[1]);\r\n                if (n !== n) { // shortcut for verifying if it's NaN\r\n                    n = 0;\r\n                } else if (n !== 0 && n !== Infinity && n !== -Infinity) {\r\n                    n = (n > 0 || -1) * Math.floor(Math.abs(n));\r\n                }\r\n            }\r\n            if (n >= len) {\r\n                return -1;\r\n            }\r\n            var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\r\n            for (; k < len; k++) {\r\n                if (k in t && t[k] === searchElement) {\r\n                    return k;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n    }\r\n    //Polyfilling forEach for old browsers\r\n    if (!Array.prototype.forEach) {\r\n        Array.prototype.forEach = function (method, thisArg) {\r\n            if (!this || !(method instanceof Function))\r\n                throw new TypeError();\r\n            for (var i = 0; i < this.length; i++)\r\n                method.call(thisArg, this[i], i, this);\r\n        };\r\n    }\r\n\t// Polyfilling trim for old browsers\r\n\tif (!String.prototype.trim) {\r\n\t\tString.prototype.trim = function () {\r\n\t\t\treturn this.replace(/^\\s+|\\s+$/, '');\r\n\t\t};\r\n\t}\r\n\r\n    // Installing Hand.js\r\n    var supportedEventsNames = [\"pointerdown\", \"pointerup\", \"pointermove\", \"pointerover\", \"pointerout\", \"pointercancel\", \"pointerenter\", \"pointerleave\"];\r\n    var upperCaseEventsNames = [\"PointerDown\", \"PointerUp\", \"PointerMove\", \"PointerOver\", \"PointerOut\", \"PointerCancel\", \"PointerEnter\", \"PointerLeave\"];\r\n\r\n    var POINTER_TYPE_TOUCH = \"touch\";\r\n    var POINTER_TYPE_PEN = \"pen\";\r\n    var POINTER_TYPE_MOUSE = \"mouse\";\r\n\r\n    var previousTargets = {};\r\n\r\n    var checkPreventDefault = function (node) {\r\n        while (node && !node.handjs_forcePreventDefault) {\r\n            node = node.parentNode;\r\n        }\r\n        return !!node || window.handjs_forcePreventDefault;\r\n    };\r\n\r\n    // Touch events\r\n    var generateTouchClonedEvent = function (sourceEvent, newName, canBubble, target, relatedTarget) {\r\n        // Considering touch events are almost like super mouse events\r\n        var evObj;\r\n        \r\n        if (document.createEvent) {\r\n            evObj = document.createEvent('MouseEvents');\r\n            evObj.initMouseEvent(newName, canBubble, true, window, 1, sourceEvent.screenX, sourceEvent.screenY,\r\n                sourceEvent.clientX, sourceEvent.clientY, sourceEvent.ctrlKey, sourceEvent.altKey,\r\n                sourceEvent.shiftKey, sourceEvent.metaKey, sourceEvent.button, relatedTarget || sourceEvent.relatedTarget);\r\n        }\r\n        else {\r\n            evObj = document.createEventObject();\r\n            evObj.screenX = sourceEvent.screenX;\r\n            evObj.screenY = sourceEvent.screenY;\r\n            evObj.clientX = sourceEvent.clientX;\r\n            evObj.clientY = sourceEvent.clientY;\r\n            evObj.ctrlKey = sourceEvent.ctrlKey;\r\n            evObj.altKey = sourceEvent.altKey;\r\n            evObj.shiftKey = sourceEvent.shiftKey;\r\n            evObj.metaKey = sourceEvent.metaKey;\r\n            evObj.button = sourceEvent.button;\r\n            evObj.relatedTarget = relatedTarget || sourceEvent.relatedTarget;\r\n        }\r\n        // offsets\r\n        if (evObj.offsetX === undefined) {\r\n            if (sourceEvent.offsetX !== undefined) {\r\n\r\n                // For Opera which creates readonly properties\r\n                if (Object && Object.defineProperty !== undefined) {\r\n                    Object.defineProperty(evObj, \"offsetX\", {\r\n                        writable: true\r\n                    });\r\n                    Object.defineProperty(evObj, \"offsetY\", {\r\n                        writable: true\r\n                    });\r\n                }\r\n\r\n                evObj.offsetX = sourceEvent.offsetX;\r\n                evObj.offsetY = sourceEvent.offsetY;\r\n            } else if (Object && Object.defineProperty !== undefined) {\r\n                Object.defineProperty(evObj, \"offsetX\", {\r\n                    get: function () {\r\n                        if (this.currentTarget && this.currentTarget.offsetLeft) {\r\n                            return sourceEvent.clientX - this.currentTarget.offsetLeft;\r\n                        }\r\n                        return sourceEvent.clientX;\r\n                    }\r\n                });\r\n                Object.defineProperty(evObj, \"offsetY\", {\r\n                    get: function () {\r\n                        if (this.currentTarget && this.currentTarget.offsetTop) {\r\n                            return sourceEvent.clientY - this.currentTarget.offsetTop;\r\n                        }\r\n                        return sourceEvent.clientY;\r\n                    }\r\n                });\r\n            }\r\n            else if (sourceEvent.layerX !== undefined) {\r\n                evObj.offsetX = sourceEvent.layerX - sourceEvent.currentTarget.offsetLeft;\r\n                evObj.offsetY = sourceEvent.layerY - sourceEvent.currentTarget.offsetTop;\r\n            }\r\n        }\r\n\r\n        // adding missing properties\r\n\r\n        if (sourceEvent.isPrimary !== undefined)\r\n            evObj.isPrimary = sourceEvent.isPrimary;\r\n        else\r\n            evObj.isPrimary = true;\r\n\r\n        if (sourceEvent.pressure)\r\n            evObj.pressure = sourceEvent.pressure;\r\n        else {\r\n            var button = 0;\r\n\r\n            if (sourceEvent.which !== undefined)\r\n                button = sourceEvent.which;\r\n            else if (sourceEvent.button !== undefined) {\r\n                button = sourceEvent.button;\r\n            }\r\n            evObj.pressure = (button === 0) ? 0 : 0.5;\r\n        }\r\n\r\n\r\n        if (sourceEvent.rotation)\r\n            evObj.rotation = sourceEvent.rotation;\r\n        else\r\n            evObj.rotation = 0;\r\n\r\n        // Timestamp\r\n        if (sourceEvent.hwTimestamp)\r\n            evObj.hwTimestamp = sourceEvent.hwTimestamp;\r\n        else\r\n            evObj.hwTimestamp = 0;\r\n\r\n        // Tilts\r\n        if (sourceEvent.tiltX)\r\n            evObj.tiltX = sourceEvent.tiltX;\r\n        else\r\n            evObj.tiltX = 0;\r\n\r\n        if (sourceEvent.tiltY)\r\n            evObj.tiltY = sourceEvent.tiltY;\r\n        else\r\n            evObj.tiltY = 0;\r\n\r\n        // Width and Height\r\n        if (sourceEvent.height)\r\n            evObj.height = sourceEvent.height;\r\n        else\r\n            evObj.height = 0;\r\n\r\n        if (sourceEvent.width)\r\n            evObj.width = sourceEvent.width;\r\n        else\r\n            evObj.width = 0;\r\n\r\n        // preventDefault\r\n        evObj.preventDefault = function () {\r\n            if (sourceEvent.preventDefault !== undefined)\r\n                sourceEvent.preventDefault();\r\n        };\r\n\r\n        // stopPropagation\r\n        if (evObj.stopPropagation !== undefined) {\r\n            var current = evObj.stopPropagation;\r\n            evObj.stopPropagation = function () {\r\n                if (sourceEvent.stopPropagation !== undefined)\r\n                    sourceEvent.stopPropagation();\r\n                current.call(this);\r\n            };\r\n        }\r\n\r\n        // Pointer values\r\n        evObj.pointerId = sourceEvent.pointerId;\r\n        evObj.pointerType = sourceEvent.pointerType;\r\n\r\n        switch (evObj.pointerType) {// Old spec version check\r\n            case 2:\r\n                evObj.pointerType = POINTER_TYPE_TOUCH;\r\n                break;\r\n            case 3:\r\n                evObj.pointerType = POINTER_TYPE_PEN;\r\n                break;\r\n            case 4:\r\n                evObj.pointerType = POINTER_TYPE_MOUSE;\r\n                break;\r\n        }\r\n\r\n        // Fire event\r\n        if (target)\r\n            target.dispatchEvent(evObj);\r\n        else if (sourceEvent.target) {\r\n            sourceEvent.target.dispatchEvent(evObj);\r\n        } else {\r\n            sourceEvent.srcElement.fireEvent(\"on\" + getMouseEquivalentEventName(newName), evObj); // We must fallback to mouse event for very old browsers\r\n        }\r\n    };\r\n\r\n    var generateMouseProxy = function (evt, eventName, canBubble, target, relatedTarget) {\r\n        evt.pointerId = 1;\r\n        evt.pointerType = POINTER_TYPE_MOUSE;\r\n        generateTouchClonedEvent(evt, eventName, canBubble, target, relatedTarget);\r\n    };\r\n\r\n    var generateTouchEventProxy = function (name, touchPoint, target, eventObject, canBubble, relatedTarget) {\r\n        var touchPointId = touchPoint.identifier + 2; // Just to not override mouse id\r\n\r\n        touchPoint.pointerId = touchPointId;\r\n        touchPoint.pointerType = POINTER_TYPE_TOUCH;\r\n        touchPoint.currentTarget = target;\r\n\r\n        if (eventObject.preventDefault !== undefined) {\r\n            touchPoint.preventDefault = function () {\r\n                eventObject.preventDefault();\r\n            };\r\n        }\r\n\r\n        generateTouchClonedEvent(touchPoint, name, canBubble, target, relatedTarget);\r\n    };\r\n\r\n    var checkEventRegistration = function (node, eventName) {\r\n        return node.__handjsGlobalRegisteredEvents && node.__handjsGlobalRegisteredEvents[eventName];\r\n    };\r\n    var findEventRegisteredNode = function (node, eventName) {\r\n        while (node && !checkEventRegistration(node, eventName))\r\n            node = node.parentNode;\r\n        if (node)\r\n            return node;\r\n        else if (checkEventRegistration(window, eventName))\r\n            return window;\r\n    };\r\n\r\n    var generateTouchEventProxyIfRegistered = function (eventName, touchPoint, target, eventObject, canBubble, relatedTarget) { // Check if user registered this event\r\n        if (findEventRegisteredNode(target, eventName)) {\r\n            generateTouchEventProxy(eventName, touchPoint, target, eventObject, canBubble, relatedTarget);\r\n        }\r\n    };\r\n\r\n    //var handleOtherEvent = function (eventObject, name, useLocalTarget, checkRegistration) {\r\n    //    if (eventObject.preventManipulation)\r\n    //        eventObject.preventManipulation();\r\n\r\n    //    for (var i = 0; i < eventObject.changedTouches.length; ++i) {\r\n    //        var touchPoint = eventObject.changedTouches[i];\r\n\r\n    //        if (useLocalTarget) {\r\n    //            previousTargets[touchPoint.identifier] = touchPoint.target;\r\n    //        }\r\n\r\n    //        if (checkRegistration) {\r\n    //            generateTouchEventProxyIfRegistered(name, touchPoint, previousTargets[touchPoint.identifier], eventObject, true);\r\n    //        } else {\r\n    //            generateTouchEventProxy(name, touchPoint, previousTargets[touchPoint.identifier], eventObject, true);\r\n    //        }\r\n    //    }\r\n    //};\r\n\r\n    var getMouseEquivalentEventName = function (eventName) {\r\n        return eventName.toLowerCase().replace(\"pointer\", \"mouse\");\r\n    };\r\n\r\n    var getPrefixEventName = function (prefix, eventName) {\r\n        var upperCaseIndex = supportedEventsNames.indexOf(eventName);\r\n        var newEventName = prefix + upperCaseEventsNames[upperCaseIndex];\r\n\r\n        return newEventName;\r\n    };\r\n\r\n    var registerOrUnregisterEvent = function (item, name, func, enable) {\r\n        if (item.__handjsRegisteredEvents === undefined) {\r\n            item.__handjsRegisteredEvents = [];\r\n        }\r\n\r\n        if (enable) {\r\n            if (item.__handjsRegisteredEvents[name] !== undefined) {\r\n                item.__handjsRegisteredEvents[name]++;\r\n                return;\r\n            }\r\n\r\n            item.__handjsRegisteredEvents[name] = 1;\r\n            item.addEventListener(name, func, false);\r\n        } else {\r\n\r\n            if (item.__handjsRegisteredEvents.indexOf(name) !== -1) {\r\n                item.__handjsRegisteredEvents[name]--;\r\n\r\n                if (item.__handjsRegisteredEvents[name] !== 0) {\r\n                    return;\r\n                }\r\n            }\r\n            item.removeEventListener(name, func);\r\n            item.__handjsRegisteredEvents[name] = 0;\r\n        }\r\n    };\r\n\r\n    var setTouchAware = function (item, eventName, enable) {\r\n        // Leaving tokens\r\n        if (!item.__handjsGlobalRegisteredEvents) {\r\n            item.__handjsGlobalRegisteredEvents = [];\r\n        }\r\n        if (enable) {\r\n            if (item.__handjsGlobalRegisteredEvents[eventName] !== undefined) {\r\n                item.__handjsGlobalRegisteredEvents[eventName]++;\r\n                return;\r\n            }\r\n            item.__handjsGlobalRegisteredEvents[eventName] = 1;\r\n        } else {\r\n            if (item.__handjsGlobalRegisteredEvents[eventName] !== undefined) {\r\n                item.__handjsGlobalRegisteredEvents[eventName]--;\r\n                if (item.__handjsGlobalRegisteredEvents[eventName] < 0) {\r\n                    item.__handjsGlobalRegisteredEvents[eventName] = 0;\r\n                }\r\n            }\r\n        }\r\n\r\n        var nameGenerator;\r\n        var eventGenerator;\r\n        if (window.MSPointerEvent) {\r\n            nameGenerator = function (name) { return getPrefixEventName(\"MS\", name); };\r\n            eventGenerator = generateTouchClonedEvent;\r\n        }\r\n        else {\r\n            nameGenerator = getMouseEquivalentEventName;\r\n            eventGenerator = generateMouseProxy;\r\n        }\r\n        switch (eventName) {\r\n            case \"pointerenter\":\r\n            case \"pointerleave\":\r\n                var targetEvent = nameGenerator(eventName);\r\n                if (item['on' + targetEvent.toLowerCase()] !== undefined) {\r\n                    registerOrUnregisterEvent(item, targetEvent, function (evt) { eventGenerator(evt, eventName); }, enable);\r\n                }\r\n                break;\r\n        }\r\n    };\r\n\r\n    // Intercept addEventListener calls by changing the prototype\r\n    var interceptAddEventListener = function (root) {\r\n        var current = root.prototype ? root.prototype.addEventListener : root.addEventListener;\r\n\r\n        var customAddEventListener = function (name, func, capture) {\r\n            // Branch when a PointerXXX is used\r\n            if (supportedEventsNames.indexOf(name) !== -1) {\r\n                setTouchAware(this, name, true);\r\n            }\r\n\r\n            if (current === undefined) {\r\n                this.attachEvent(\"on\" + getMouseEquivalentEventName(name), func);\r\n            } else {\r\n                current.call(this, name, func, capture);\r\n            }\r\n        };\r\n\r\n        if (root.prototype) {\r\n            root.prototype.addEventListener = customAddEventListener;\r\n        } else {\r\n            root.addEventListener = customAddEventListener;\r\n        }\r\n    };\r\n\r\n    // Intercept removeEventListener calls by changing the prototype\r\n    var interceptRemoveEventListener = function (root) {\r\n        var current = root.prototype ? root.prototype.removeEventListener : root.removeEventListener;\r\n\r\n        var customRemoveEventListener = function (name, func, capture) {\r\n            // Release when a PointerXXX is used\r\n            if (supportedEventsNames.indexOf(name) !== -1) {\r\n                setTouchAware(this, name, false);\r\n            }\r\n\r\n            if (current === undefined) {\r\n                this.detachEvent(getMouseEquivalentEventName(name), func);\r\n            } else {\r\n                current.call(this, name, func, capture);\r\n            }\r\n        };\r\n        if (root.prototype) {\r\n            root.prototype.removeEventListener = customRemoveEventListener;\r\n        } else {\r\n            root.removeEventListener = customRemoveEventListener;\r\n        }\r\n    };\r\n\r\n    // Hooks\r\n    interceptAddEventListener(window);\r\n    interceptAddEventListener(window.HTMLElement || window.Element);\r\n    interceptAddEventListener(document);\r\n    if (!navigator.isCocoonJS){\r\n        interceptAddEventListener(HTMLBodyElement);\r\n        interceptAddEventListener(HTMLDivElement);\r\n        interceptAddEventListener(HTMLImageElement);\r\n        interceptAddEventListener(HTMLUListElement);\r\n        interceptAddEventListener(HTMLAnchorElement);\r\n        interceptAddEventListener(HTMLLIElement);\r\n        interceptAddEventListener(HTMLTableElement);\r\n        if (window.HTMLSpanElement) {\r\n            interceptAddEventListener(HTMLSpanElement);\r\n        }\r\n    }\r\n    if (window.HTMLCanvasElement) {\r\n        interceptAddEventListener(HTMLCanvasElement);\r\n    }\r\n    if (!navigator.isCocoonJS && window.SVGElement) {\r\n        interceptAddEventListener(SVGElement);\r\n    }\r\n\r\n    interceptRemoveEventListener(window);\r\n    interceptRemoveEventListener(window.HTMLElement || window.Element);\r\n    interceptRemoveEventListener(document);\r\n    if (!navigator.isCocoonJS){\r\n        interceptRemoveEventListener(HTMLBodyElement);\r\n        interceptRemoveEventListener(HTMLDivElement);\r\n        interceptRemoveEventListener(HTMLImageElement);\r\n        interceptRemoveEventListener(HTMLUListElement);\r\n        interceptRemoveEventListener(HTMLAnchorElement);\r\n        interceptRemoveEventListener(HTMLLIElement);\r\n        interceptRemoveEventListener(HTMLTableElement);\r\n        if (window.HTMLSpanElement) {\r\n            interceptRemoveEventListener(HTMLSpanElement);\r\n        }\r\n    }\r\n    if (window.HTMLCanvasElement) {\r\n        interceptRemoveEventListener(HTMLCanvasElement);\r\n    }\r\n    if (!navigator.isCocoonJS && window.SVGElement) {\r\n        interceptRemoveEventListener(SVGElement);\r\n    }\r\n\r\n    // Prevent mouse event from being dispatched after Touch Events action\r\n    var touching = false;\r\n    var touchTimer = -1;\r\n\r\n    function setTouchTimer() {\r\n        touching = true;\r\n        clearTimeout(touchTimer);\r\n        touchTimer = setTimeout(function () {\r\n            touching = false;\r\n        }, 700);\r\n        // 1. Mobile browsers dispatch mouse events 300ms after touchend\r\n        // 2. Chrome for Android dispatch mousedown for long-touch about 650ms\r\n        // Result: Blocking Mouse Events for 700ms.\r\n    }\r\n\r\n    function getFirstCommonNode(x, y) {\r\n        while (x) {\r\n            if (x.contains(y))\r\n                return x;\r\n            x = x.parentNode;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    //generateProxy receives a node to dispatch the event\r\n    function dispatchPointerEnter(currentTarget, relatedTarget, generateProxy) {\r\n        var commonParent = getFirstCommonNode(currentTarget, relatedTarget);\r\n        var node = currentTarget;\r\n        var nodelist = [];\r\n        while (node && node !== commonParent) {//target range: this to the direct child of parent relatedTarget\r\n            if (checkEventRegistration(node, \"pointerenter\")) //check if any parent node has pointerenter\r\n                nodelist.push(node);\r\n            node = node.parentNode;\r\n        }\r\n        while (nodelist.length > 0)\r\n            generateProxy(nodelist.pop());\r\n    }\r\n\r\n    //generateProxy receives a node to dispatch the event\r\n    function dispatchPointerLeave(currentTarget, relatedTarget, generateProxy) {\r\n        var commonParent = getFirstCommonNode(currentTarget, relatedTarget);\r\n        var node = currentTarget;\r\n        while (node && node !== commonParent) {//target range: this to the direct child of parent relatedTarget\r\n            if (checkEventRegistration(node, \"pointerleave\"))//check if any parent node has pointerleave\r\n                generateProxy(node);\r\n            node = node.parentNode;\r\n        }\r\n    }\r\n    \r\n    // Handling events on window to prevent unwanted super-bubbling\r\n    // All mouse events are affected by touch fallback\r\n    function applySimpleEventTunnels(nameGenerator, eventGenerator) {\r\n        [\"pointerdown\", \"pointermove\", \"pointerup\", \"pointerover\", \"pointerout\"].forEach(function (eventName) {\r\n            window.addEventListener(nameGenerator(eventName), function (evt) {\r\n                if (!touching && findEventRegisteredNode(evt.target, eventName))\r\n                    eventGenerator(evt, eventName, true);\r\n            });\r\n        });\r\n        if (window['on' + nameGenerator(\"pointerenter\").toLowerCase()] === undefined)\r\n            window.addEventListener(nameGenerator(\"pointerover\"), function (evt) {\r\n                if (touching)\r\n                    return;\r\n                var foundNode = findEventRegisteredNode(evt.target, \"pointerenter\");\r\n                if (!foundNode || foundNode === window)\r\n                    return;\r\n                else if (!foundNode.contains(evt.relatedTarget)) {\r\n                    dispatchPointerEnter(foundNode, evt.relatedTarget, function (targetNode) {\r\n                        eventGenerator(evt, \"pointerenter\", false, targetNode, evt.relatedTarget);\r\n                    });\r\n                }\r\n            });\r\n        if (window['on' + nameGenerator(\"pointerleave\").toLowerCase()] === undefined)\r\n            window.addEventListener(nameGenerator(\"pointerout\"), function (evt) {\r\n                if (touching)\r\n                    return;\r\n                var foundNode = findEventRegisteredNode(evt.target, \"pointerleave\");\r\n                if (!foundNode || foundNode === window)\r\n                    return;\r\n                else if (!foundNode.contains(evt.relatedTarget)) {\r\n                    dispatchPointerLeave(foundNode, evt.relatedTarget, function (targetNode) {\r\n                        eventGenerator(evt, \"pointerleave\", false, targetNode, evt.relatedTarget);\r\n                    });\r\n                }\r\n            });\r\n    }\r\n\r\n    (function () {\r\n        if (window.MSPointerEvent) {\r\n            //IE 10\r\n            applySimpleEventTunnels(\r\n                function (name) { return getPrefixEventName(\"MS\", name); },\r\n                generateTouchClonedEvent);\r\n        }\r\n        else {\r\n            applySimpleEventTunnels(getMouseEquivalentEventName, generateMouseProxy);\r\n\r\n            // Handling move on window to detect pointerleave/out/over\r\n            if (window.ontouchstart !== undefined) {\r\n                window.addEventListener('touchstart', function (eventObject) {\r\n                    for (var i = 0; i < eventObject.changedTouches.length; ++i) {\r\n                        var touchPoint = eventObject.changedTouches[i];\r\n                        previousTargets[touchPoint.identifier] = touchPoint.target;\r\n\r\n                        generateTouchEventProxyIfRegistered(\"pointerover\", touchPoint, touchPoint.target, eventObject, true);\r\n\r\n                        //pointerenter should not be bubbled\r\n                        dispatchPointerEnter(touchPoint.target, null, function (targetNode) {\r\n                            generateTouchEventProxy(\"pointerenter\", touchPoint, targetNode, eventObject, false);\r\n                        });\r\n\r\n                        generateTouchEventProxyIfRegistered(\"pointerdown\", touchPoint, touchPoint.target, eventObject, true);\r\n                    }\r\n                    setTouchTimer();\r\n                });\r\n\r\n                window.addEventListener('touchend', function (eventObject) {\r\n                    for (var i = 0; i < eventObject.changedTouches.length; ++i) {\r\n                        var touchPoint = eventObject.changedTouches[i];\r\n                        var currentTarget = previousTargets[touchPoint.identifier];\r\n\r\n                        generateTouchEventProxyIfRegistered(\"pointerup\", touchPoint, currentTarget, eventObject, true);\r\n                        generateTouchEventProxyIfRegistered(\"pointerout\", touchPoint, currentTarget, eventObject, true);\r\n\r\n                        //pointerleave should not be bubbled\r\n                        dispatchPointerLeave(currentTarget, null, function (targetNode) {\r\n                            generateTouchEventProxy(\"pointerleave\", touchPoint, targetNode, eventObject, false);\r\n                        });\r\n                    }\r\n                    setTouchTimer();\r\n                });\r\n\r\n                window.addEventListener('touchmove', function (eventObject) {\r\n                    for (var i = 0; i < eventObject.changedTouches.length; ++i) {\r\n                        var touchPoint = eventObject.changedTouches[i];\r\n                        var newTarget = document.elementFromPoint(touchPoint.clientX, touchPoint.clientY);\r\n                        var currentTarget = previousTargets[touchPoint.identifier];\r\n\r\n                        // If force preventDefault\r\n                        if (currentTarget && checkPreventDefault(currentTarget) === true)\r\n                            eventObject.preventDefault();\r\n\r\n                        generateTouchEventProxyIfRegistered(\"pointermove\", touchPoint, currentTarget, eventObject, true);\r\n                        if (!navigator.isCocoonJS){\r\n                            var newTarget = document.elementFromPoint(touchPoint.clientX, touchPoint.clientY);\r\n                            if (currentTarget === newTarget) {\r\n                                continue; // We can skip this as the pointer is effectively over the current target\r\n                            }\r\n\r\n                            if (currentTarget) {\r\n                                // Raise out\r\n                                generateTouchEventProxyIfRegistered(\"pointerout\", touchPoint, currentTarget, eventObject, true, newTarget);\r\n\r\n                                // Raise leave\r\n                                if (!currentTarget.contains(newTarget)) { // Leave must be called if the new target is not a child of the current\r\n                                    dispatchPointerLeave(currentTarget, newTarget, function (targetNode) {\r\n                                        generateTouchEventProxy(\"pointerleave\", touchPoint, targetNode, eventObject, false, newTarget);\r\n                                    });\r\n                                }\r\n                            }\r\n\r\n                            if (newTarget) {\r\n                                // Raise over\r\n                                generateTouchEventProxyIfRegistered(\"pointerover\", touchPoint, newTarget, eventObject, true, currentTarget);\r\n\r\n                                // Raise enter\r\n                                if (!newTarget.contains(currentTarget)) { // Leave must be called if the new target is not the parent of the current\r\n                                    dispatchPointerEnter(newTarget, currentTarget, function (targetNode) {\r\n                                        generateTouchEventProxy(\"pointerenter\", touchPoint, targetNode, eventObject, false, currentTarget);\r\n                                    })\r\n                                }\r\n                            }\r\n                            previousTargets[touchPoint.identifier] = newTarget;\r\n                        }\r\n                    }\r\n                    setTouchTimer();\r\n                });\r\n\r\n                window.addEventListener('touchcancel', function (eventObject) {\r\n                    for (var i = 0; i < eventObject.changedTouches.length; ++i) {\r\n                        var touchPoint = eventObject.changedTouches[i];\r\n\r\n                        generateTouchEventProxyIfRegistered(\"pointercancel\", touchPoint, previousTargets[touchPoint.identifier], eventObject, true);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    })();\r\n    \r\n\r\n    // Extension to navigator\r\n    if (navigator.pointerEnabled === undefined) {\r\n\r\n        // Indicates if the browser will fire pointer events for pointing input\r\n        navigator.pointerEnabled = true;\r\n\r\n        // IE\r\n        if (navigator.msPointerEnabled) {\r\n            navigator.maxTouchPoints = navigator.msMaxTouchPoints;\r\n        }\r\n    }\r\n})();\n(function () {\r\n    if (window.PointerEvent)\r\n        return;\r\n        \r\n    // Handling touch-action css rule\r\n    if (document.styleSheets && document.addEventListener) {\r\n        document.addEventListener(\"DOMContentLoaded\", function () {\r\n            if (document.body.style.touchAction !== undefined)\r\n                return;\r\n\r\n            var globalRegex = new RegExp(\".+?{.*?}\", \"m\");\r\n            var selectorRegex = new RegExp(\".+?{\", \"m\");\r\n            var filterStylesheet = function (unfilteredSheet) {\r\n                var filter = globalRegex.exec(unfilteredSheet);\r\n                if (!filter) {\r\n                    return;\r\n                }\r\n                var block = filter[0];\r\n                unfilteredSheet = unfilteredSheet.replace(block, \"\").trim();\r\n                var selectorText = selectorRegex.exec(block)[0].replace(\"{\", \"\").trim();\r\n\r\n                // Checking if the user wanted to deactivate the default behavior\r\n                if (block.replace(/\\s/g, \"\").indexOf(\"touch-action:none\") !== -1) {\r\n                    var elements = document.querySelectorAll(selectorText);\r\n\r\n                    for (var elementIndex = 0; elementIndex < elements.length; elementIndex++) {\r\n                        var element = elements[elementIndex];\r\n\r\n                        if (element.style.msTouchAction !== undefined) {\r\n                            element.style.msTouchAction = \"none\";\r\n                        }\r\n                        else {\r\n                            element.handjs_forcePreventDefault = true;\r\n                        }\r\n                    }\r\n                }\r\n                return unfilteredSheet;\r\n            };\r\n            var processStylesheet = function (unfilteredSheet) {\r\n                if (window.setImmediate) {//not blocking UI interaction for a long time\r\n                    if (unfilteredSheet)\r\n                        setImmediate(processStylesheet, filterStylesheet(unfilteredSheet));\r\n                }\r\n                else {\r\n                    while (unfilteredSheet) {\r\n                        unfilteredSheet = filterStylesheet(unfilteredSheet);\r\n                    }\r\n                }\r\n            }; // Looking for touch-action in referenced stylesheets\r\n            try {\r\n                for (var index = 0; index < document.styleSheets.length; index++) {\r\n                    var sheet = document.styleSheets[index];\r\n\r\n                    if (sheet.href == null /* undefined or null */) { // it is an inline style\r\n                        continue;\r\n                    }\r\n\r\n                    // Loading the original stylesheet\r\n                    var xhr = new XMLHttpRequest();\r\n                    xhr.open(\"get\", sheet.href);\r\n                    xhr.send();\r\n\r\n                    var unfilteredSheet = xhr.responseText.replace(/(\\n|\\r)/g, \"\");\r\n\r\n                    processStylesheet(unfilteredSheet);\r\n                }\r\n            } catch (e) {\r\n                // Silently fail...\r\n            }\r\n\r\n            // Looking for touch-action in inline styles\r\n            var styles = document.getElementsByTagName(\"style\");\r\n            for (var index = 0; index < styles.length; index++) {\r\n                var inlineSheet = styles[index];\r\n\r\n                var inlineUnfilteredSheet = inlineSheet.innerHTML.replace(/(\\n|\\r)/g, \"\").trim();\r\n\r\n                processStylesheet(inlineUnfilteredSheet);\r\n            }\r\n        }, false);\r\n    }\r\n})();\r\n"]},"metadata":{},"sourceType":"script"}