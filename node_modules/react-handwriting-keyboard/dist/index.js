"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=_interopDefault(require("react")),ReactDOM=_interopDefault(require("react-dom")),classnames=_interopDefault(require("classnames"));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}var Handwriting=function(){function e(t,n){_classCallCheck(this,e),this.canvas=t,this.cxt=t.getContext("2d"),this.cxt.lineCap="round",this.cxt.lineJoin="round",this.lineWidth=n||3,this.width=t.width,this.height=t.height,this.drawing=!1,this.handwritingX=[],this.handwritingY=[],this.trace=[],this.options={},this.step=[],this.redo_step=[],this.redo_trace=[],this.allowUndo=!1,this.allowRedo=!1,this.timer=null,this.callback=null,this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.mouseUp.bind(this)),this.canvas.addEventListener("touchstart",this.touchStart.bind(this)),this.canvas.addEventListener("touchmove",this.touchMove.bind(this)),this.canvas.addEventListener("touchend",this.touchEnd.bind(this))}return _createClass(e,[{key:"set_Undo_Redo",value:function(e,t){this.allowUndo=e,this.allowRedo=!!e&&t,this.allowUndo||(this.step=[],this.redo_step=[],this.redo_trace=[])}},{key:"setLineWidth",value:function(e){this.lineWidth=e}},{key:"setCallBack",value:function(e){this.callback=e}},{key:"setOptions",value:function(e){this.options=e}},{key:"mouseDown",value:function(e){this.cxt.lineWidth=this.lineWidth,this.handwritingX=[],this.handwritingY=[],this.drawing=!0,this.cxt.beginPath();var t=this.canvas.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;this.cxt.moveTo(n,i),this.handwritingX.push(n),this.handwritingY.push(i),this.timer&&clearTimeout(this.timer)}},{key:"mouseMove",value:function(e){if(this.drawing){var t=this.canvas.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;this.cxt.lineTo(n,i),this.cxt.stroke(),this.handwritingX.push(n),this.handwritingY.push(i)}}},{key:"mouseUp",value:function(){var e=this,t=[];t.push(this.handwritingX),t.push(this.handwritingY),t.push([]),this.trace.push(t),this.drawing=!1,this.allowUndo&&this.step.push(this.toDataURL()),this.timer=setTimeout((function(){e.recognize()}),500)}},{key:"touchStart",value:function(e){e.preventDefault(),this.cxt.lineWidth=this.lineWidth,this.handwritingX=[],this.handwritingY=[];var t=document.documentElement,n=this.getBoundingClientRect(),i=n.top+window.pageYOffset-t.clientTop,o=n.left+window.pageXOffset-t.clientLeft,a=e.changedTouches[0],r=a.pageX-o,s=a.pageY-i;this.handwritingX.push(r),this.handwritingY.push(s),this.cxt.beginPath(),this.cxt.moveTo(r,s),this.timer&&clearTimeout(this.timer)}},{key:"touchMove",value:function(e){e.preventDefault();var t=e.targetTouches[0],n=document.documentElement,i=this.getBoundingClientRect(),o=i.top+window.pageYOffset-n.clientTop,a=i.left+window.pageXOffset-n.clientLeft,r=t.pageX-a,s=t.pageY-o;this.handwritingX.push(r),this.handwritingY.push(s),this.cxt.lineTo(r,s),this.cxt.stroke()}},{key:"touchEnd",value:function(e){var t=this,n=[];n.push(this.handwritingX),n.push(this.handwritingY),n.push([]),this.trace.push(n),this.allowUndo&&this.step.push(this.toDataURL()),this.timer=setTimeout((function(){t.recognize()}),500)}},{key:"undo",value:function(){this.allowUndo&&this.step.length>0&&(1===this.step.length?this.allowRedo&&(this.redo_step.push(this.step.pop()),this.redo_trace.push(this.trace.pop()),this.cxt.clearRect(0,0,this.width,this.height)):(this.allowRedo?(this.redo_step.push(this.step.pop()),this.redo_trace.push(this.trace.pop())):(this.step.pop(),this.trace.pop()),this.loadFromUrl(this.step.slice(-1)[0])))}},{key:"redo",value:function(){this.allowRedo&&this.redo_step.length>0&&(this.step.push(this.redo_step.pop()),this.trace.push(this.redo_trace.pop()),this.loadFromUrl(this.step.slice(-1)[0]))}},{key:"erase",value:function(){this.cxt.clearRect(0,0,this.width,this.height),this.step=[],this.redo_step=[],this.redo_trace=[],this.trace=[]}},{key:"loadFromUrl",value:function(e){var t=new Image;t.onload=function(){this.canvas.cxt.clearRect(0,0,this.width,this.height),this.canvas.cxt.drawImage(t,0,0)},t.src=e}},{key:"recognize",value:function(){var e=JSON.stringify({options:"enable_pre_space",requests:[{writing_guide:{writing_area_width:this.options.width||this.width||void 0,writing_area_height:this.options.height||this.width||void 0},ink:this.trace,language:this.options.language||"pt_BR"}]}),t=this,n=new XMLHttpRequest;n.addEventListener("readystatechange",(function(){if(4===this.readyState)switch(this.status){case 200:var e,n=JSON.parse(this.responseText);1===n.length?console.log(Error(n[0])):(t.erase(),e=n[1][0][1]),t.options.numOfWords&&(e=e.filter((function(e){return e.length===t.options.numOfWords}))),t.options&&t.options.numOfReturn&&(e=e.slice(0,this.options.numOfReturn)),t.callback(e,void 0);break;case 403:t.callback(void 0,Error("access denied"));break;case 503:t.callback(void 0,Error("can't connect to recognition server"))}})),n.open("POST","https://www.google.cn/inputtools/request?ime=handwriting&app=mobilesearch&cs=1&oe=UTF-8"),n.setRequestHeader("content-type","application/json"),n.send(e)}}]),e}();function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css="@import '//at.alicdn.com/t/font_2025382_zp7gawrqpdc.css';\n.keyboard {\n  z-index: 100;\n  position: fixed;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  opacity: 0;\n  transition: 0.2s ease-in;\n  background-color: #eceff1;\n  transform: translate3d(0, 100%, 0);\n  box-shadow: 0 0 0 transparent, 0 -2px 20px #cecece;\n}\n.keyboard.show {\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n}\n.keyboard .keyboard-output {\n  position: relative;\n  width: 100%;\n  padding: 8px 12px;\n  background-color: #fbfcfc;\n}\n.keyboard .keyboard-output input {\n  height: 100%;\n  width: 100%;\n  padding: 10px;\n  font-size: 20px;\n  color: #8e729d;\n  background: #eceff1;\n  border: 1px solid #e0e3e5;\n  border-radius: 4px;\n  outline: none;\n}\n.keyboard .keyboard-output .icon-Emptied {\n  position: absolute;\n  top: 50%;\n  right: 24px;\n  font-size: 20px;\n  color: rgba(0, 0, 0, 0.4);\n  transform: translateY(-50%);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.keyboard .keyboard-output .icon-Emptied:hover {\n  color: rgba(255, 0, 0, 0.6);\n}\n.keyboard .keyboard-nav {\n  height: 50px;\n  text-align: center;\n  background-color: #fbfcfc;\n}\n.keyboard .keyboard-nav .nav-item {\n  display: inline-block;\n  width: 200px;\n  height: 44px;\n  margin-top: 6px;\n  line-height: 44px;\n  font-size: 18px;\n  color: #37474f;\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.keyboard .keyboard-nav .nav-item.active {\n  background-color: #eceff1;\n  border-radius: 2px 2px 0 0;\n}\n.keyboard .keyboard-content {\n  padding: 14px 13px 10px;\n}\n.keyboard .keyboard-content .content-item {\n  display: none;\n  margin: 0;\n  padding: 0;\n}\n.keyboard .keyboard-content .content-item.active {\n  display: flex;\n  align-items: stretch;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-enter {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-enter .handwriting-options {\n  height: 65px;\n  margin: 0;\n  margin-bottom: 13px;\n  padding: 0 12px;\n  line-height: 65px;\n  background-color: #fff;\n  font-size: 24px;\n  color: #37474f;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-enter .handwriting-options .options-word {\n  display: inline-block;\n  margin-right: 30px;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-enter .handwriting-options .options-holder {\n  font-size: 18px;\n  opacity: 0.3;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-enter .handwriting-drawboard {\n  height: 226px;\n  width: 100%;\n  background-color: #fff;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-action {\n  display: flex;\n  list-style: none;\n  flex-direction: column;\n  flex-basis: 170px;\n  margin: 0;\n  margin-left: 13px;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-action .action-item {\n  height: 65px;\n  width: 100%;\n  margin-bottom: 13px;\n  background: #e0e3e5;\n  border-radius: 2px;\n  line-height: 65px;\n  font-size: 18px;\n  color: #37474f;\n  text-align: center;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-action .action-item:last-child {\n  height: 70px;\n  margin-bottom: 0;\n  margin-top: auto;\n  line-height: 70px;\n  color: #fff;\n  background-color:#f47215;\n  border: 1px solid #f47215;\n  border-radius: 2px;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-action .action-item:last-child:active {\n  background-image: linear-gradient(-180deg, #4b3185 0%, #4b3185 100%);\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-action .action-item:active {\n  background-color: #fbfcfc;\n}\n.keyboard .keyboard-content .content-item.handwriting .handwriting-action .action-item .iconfont {\n  font-size: 32px;\n  color: #7b868b;\n}\n.keyboard .keyboard-content .content-item.letter {\n  flex-direction: column;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line {\n  display: flex;\n  justify-content: flex-end;\n  width: 100%;\n  margin-bottom: 13px;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell {\n  flex: 1 1 110px;\n  height: 65px;\n  margin-right: 13px;\n  line-height: 65px;\n  font-size: 30px;\n  color: #37474f;\n  text-align: center;\n  background-color: #fbfcfc;\n  border-radius: 2px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell:last-child {\n  margin-right: 0;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell.dusky {\n  background-color: #e0e3e5;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell.dusky:active {\n  background-color: #fbfcfc;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell.dusky .iconfont {\n  color: #7b868b;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell.space {\n  flex: 6 1 725px;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell.space .iconfont {\n  font-size: 48px;\n  color: #7b868b;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell.confirm {\n  color: #fff;\n  font-size: 20px;\n  background-color:#f47215;\n  border: 1px solid #f47215;\n  border-radius: 2px;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell.confirm:active {\n  background-image: linear-gradient(-180deg, #4b3185 0%, #4b3185 100%);\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell:active {\n  background-color: #e0e3e5;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell .iconfont {\n  font-size: 32px;\n  color: #6b529e;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line .letter-cell .iconfont.icon-uppercaseletter {\n  font-size: 28px;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line:nth-child(2):before {\n  content: '';\n  flex-basis: 55px;\n  margin-right: 13px;\n}\n.keyboard .keyboard-content .content-item.letter .letter-line:nth-child(2) .letter-cell:last-child {\n  flex-basis: 170px;\n}\n.keyboard .keyboard-content .content-item.digital {\n  flex-direction: column;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line {\n  display: flex;\n  justify-content: flex-end;\n  width: 100%;\n  margin-bottom: 13px;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell {\n  flex-basis: 316px;\n  flex-grow: 1;\n  height: 65px;\n  margin-right: 13px;\n  line-height: 65px;\n  font-size: 30px;\n  color: #37474f;\n  text-align: center;\n  background-color: #fbfcfc;\n  border-radius: 2px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell:first-child {\n  flex-basis: 170px;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell:last-child {\n  flex-basis: 170px;\n  margin-right: 0;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell.dusky {\n  background-color: #e0e3e5;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell.dusky:active {\n  background-color: #fbfcfc;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell.dusky .iconfont {\n  font-size: 32px;\n  color: #7b868b;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell.dusky .iconfont.icon-space {\n  font-size: 48px;\n  transform: scale(0.5);\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell.confirm {\n  color: #fff;\n  font-size: 20px;\n  background-color:#f47215;\n  border: 1px solid #f47215;\n  border-radius: 2px;\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell.confirm:active {\n  background-image: linear-gradient(-180deg, #4b3185 0%, #4b3185 100%);\n}\n.keyboard .keyboard-content .content-item.digital .digital-line .digital-cell:active {\n  background-color: #e0e3e5;\n}\n";styleInject(css);var Keyboard=function(e){_inherits(n,React.Component);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,o=Array(i),a=0;i>a;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={visible:!1,cursorPos:e.props.target.value?e.props.target.value.length:0,value:e.props.target.value||"",keyboardType:0,characters:[],letters:[["q","w","e","r","t","y","u","i","o","p","icon-keyboard dusky"],["a","s","d","f","g","h","j","k","l","icon-delete dusky"],["icon-uppercase dusky","z","x","c","v","b","n","m","! dusky","? dusky","# dusky"],["~ dusky","/ dusky","icon-space space",". dusky",", dusky","Confirmar confirm"]],upperCase:!1},e.handleSwitchKeyBoard=function(t){e.setState({keyboardType:t,characters:[]})},e.handleSelectCharacters=function(t){var n=e.state.value,i=e.input.selectionEnd,o=0===i-e.input.selectionStart?i-1:e.input.selectionStart,a=n.substr(0,o)+t.target.innerText+n.substr(i,n.length-1);e.setState({value:a,cursorPos:o+t.target.innerText.length,characters:[]})},e.handlePressKey=function(t,n){var i=e.props,o=i.onChange,a=i.onClose,r=e.state,s=r.value,c=r.letters,l=r.upperCase,d=e.input.selectionEnd;if(t.length>1&&t.indexOf("icon")>-1)switch(t.match(/-(\w+)/)[1]){case"keyboard":n.stopPropagation(),a&&a();break;case"delete":var h=d-e.input.selectionStart,u=0===h?d-1:d-h;if(d>0){var p=s.substr(0,0===h?d-1:e.input.selectionStart)+s.substr(d,s.length-1);e.setState({value:p,cursorPos:u,characters:[]})}break;case"uppercase":var g=c.map((function(e){return e=e.map((function(e){if(1===e.length)e=e[l?"toLowerCase":"toUpperCase"]();else if(e.indexOf("uppercase")>-1){var t=l?" dusky":"";e=e.split(" ")[0]+t}return e}))}));e.setState({letters:g,upperCase:!l});break;case"space":e.setState({value:s.substr(0,d)+" "+s.substr(d,s.length-1),cursorPos:d+1})}else t.indexOf("Confirmar")>-1?(n.stopPropagation(),o&&o(s),a&&a()):t.indexOf("重写")>-1?console.log("重写"):e.setState({value:s.substr(0,d)+t+s.substr(d,s.length-1),cursorPos:d+1})},e.handleChange=function(t){e.setState({value:t.target.value,cursorPos:e.input.selectionEnd})},e.handleKeyboardClick=function(){e.input.focus()},e.clearValue=function(){e.setState({value:"",characters:[]})},e}return _createClass(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.value.length;this.input.focus(),this.input.setSelectionRange(t,t);var n=this.drawboard.getBoundingClientRect();this.drawboard.height=n.height,this.drawboard.width=n.width;var i=new Handwriting(this.drawboard),o=this;i.setCallBack((function(e,t){if(t)throw t;if(e&&e.length>0){var n=o.state.value,i=o.input.selectionEnd;o.setState({value:n.substr(0,i)+e[0]+n.substr(i,n.length-1),cursorPos:i+e[0].length,characters:e}),o.input.setSelectionRange(i,i+e[0].length)}})),this.setState({visible:!0}),setTimeout((function(){document.getElementById("root").addEventListener("click",e.props.onClose,!1)}),500)}},{key:"componentDidUpdate",value:function(){var e=this.state.cursorPos;this.input.setSelectionRange(e,e)}},{key:"componentWillUnmount",value:function(){document.getElementById("root").removeEventListener("click",this.props.onClose,!1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,i=t.autoFocus,o=t.keyboardType,a=t.characters,r=t.letters;return React.createElement("div",{className:classnames({keyboard:!0,show:t.visible}),onClick:this.handleKeyboardClick},React.createElement("header",{className:"keyboard-output"},React.createElement("input",{type:"text",value:n,autoFocus:i,ref:function(t){return e.input=t},onChange:this.handleChange}),React.createElement("i",{className:"iconfont icon-Emptied",onClick:this.clearValue})),React.createElement("ul",{className:"keyboard-nav"},['Quadro', 'Teclado comum', 'Teclado numérico'].map((function(t,n){return React.createElement("li",{key:t,className:classnames({"nav-item":!0,active:o===n}),onClick:e.handleSwitchKeyBoard.bind(e,n)},t)}))),React.createElement("section",{className:"keyboard-content"},React.createElement("div",{className:classnames({"content-item":!0,handwriting:!0,active:0===o})},React.createElement("div",{className:"handwriting-enter"},React.createElement("p",{className:"handwriting-options"},0===a.length?React.createElement("span",{className:"options-holder"},"Comece a escrever"):a.map((function(t){return React.createElement("span",{key:t,className:"options-word",onClick:e.handleSelectCharacters},t)}))),React.createElement("canvas",{className:"handwriting-drawboard",ref:function(t){return e.drawboard=t}})),React.createElement("ul",{className:"handwriting-action"},["icon-keyboard","icon-delete","Confirmar"].map((function(t){var n=t.indexOf("icon")>-1&&t;return React.createElement("li",{key:t,className:"action-item",onClick:e.handlePressKey.bind(e,t)},n?React.createElement("i",{className:"iconfont "+n}):t)})))),React.createElement("ul",{className:classnames({"content-item":!0,letter:!0,active:1===o})},r.map((function(t,n){return React.createElement("li",{key:n,className:"letter-line"},t.map((function(t,n){var i=t.split(" ")[0],o=i.indexOf("icon")>-1&&i,a=t.split(" ")[1];return React.createElement("span",{key:i,className:"letter-cell".concat(a?" "+a:""),onClick:e.handlePressKey.bind(e,i)},o?React.createElement("i",{className:"iconfont "+o}):i)})))}))),React.createElement("ul",{className:classnames({"content-item":!0,digital:!0,active:2===o})},[["- dusky","1","2","3","icon-keyboard dusky"],["+ dusky","4","5","6","icon-delete dusky"],["/ dusky","7","8","9","icon-space dusky"],["~ dusky","。 dusky","0",", dusky","Confirmar confirm"]].map((function(t,n){return React.createElement("li",{key:n,className:"digital-line"},t.map((function(t,n){var i=t.split(" ")[0],o=i.indexOf("icon")>-1&&i,a=t.split(" ")[1];return React.createElement("span",{key:i,className:"digital-cell".concat(a?" "+a:""),onClick:e.handlePressKey.bind(e,i)},o?React.createElement("i",{className:"iconfont "+o}):i)})))})))))}}]),n}(),KeyboardAPI=function(){function e(){_classCallCheck(this,e),this.keyboardLayer=document.createElement("div"),this.keyboardLayer.setAttribute("class","keyboard-layer"),document.body.appendChild(this.keyboardLayer)}return _createClass(e,[{key:"show",value:function(e){var t=e.target,n=e.onChange;this.target=t,ReactDOM.render(React.createElement(Keyboard,{target:t,onChange:n,onClose:this.close.bind(this)}),this.keyboardLayer)}},{key:"close",value:function(e){var t=this;e&&e.target===this.target||0>=this.keyboardLayer.getElementsByClassName("keyboard").length||(this.keyboardLayer.getElementsByClassName("keyboard")[0].setAttribute("class","keyboard"),setTimeout((function(){ReactDOM.unmountComponentAtNode(t.keyboardLayer)}),250))}}]),e}(),index=new KeyboardAPI;module.exports=index;
